<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Welcome</title>
    <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:400,600" rel="stylesheet">
    <link rel="stylesheet" href="/style.css">
    
    <!-- <link rel="stylesheet" href="/nav.css"> -->
	<script src="https://unpkg.com/animejs@3.0.1/lib/anime.min.js"></script>
    <script src="https://unpkg.com/scrollreveal@4.0.0/dist/scrollreveal.min.js"></script>
    <script src="/taskScript.js"></script>
    

</head>

<style>
    .announcement-container,
    .task-container{
        border: 2px red;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

.announcement-title, .task-title{
  margin-bottom: 2px;
  color:#00c3af ;
}

.announcement-content, .task-content{
  margin-bottom: 2px;
}

.announcement-created-by, .task-created-by,
.task-created-at, .announcement-created-at{
    opacity: 0.5;
  margin-bottom: 1px;
  font-size: 13px;
}

.announcement-separator, .task-separator{
  margin-top: 2px;
}

#announcement-button, .complete{
    margin-top: 5px;
    background-color: #007BFF; /* Initial background color */
    color: white; /* Initial text color */
    border: none;
    /* padding: 10px 20px; */
    cursor: pointer;
    transition: background-color 0.3s ease, color 0.3s ease; /* Smooth transition for hover effect */
}

#announcement-button:hover,
.complete:hover {
    background-color: #0056b3; /* Background color on hover */
    color: #ffffff; /* Text color on hover */
}


.announcement-delete-button, .delete{
  margin-top: 2px;
  color: rgb(250, 72, 72);
        cursor: pointer;
        background: none;
        border: none;
        font-size: 15px;
        /* border: 1px solid black; */
        opacity: 0.8;
  
}
    #heading
    {
        font-size: 100px;
        font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;

    }
    .announcement-class, .task-class{
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    grid-template-columns: repeat(4, 1fr);
    gap: 5px; /* Adjust the gap between grid items as needed */
}

.announcement-class div, .task-class div {
    /* border: 1px solid #ccc; */
    padding: 2px;
    /* background-color: #033965; */
    background: linear-gradient(to left top, #033965, rgba(0, 191, 251, 0));
    /* border-radius: 8px; */
}

.task-class div {
     /* border: 1px solid #ccc; */
     padding: 2px;
    /* background-color: #033965; */
    background: linear-gradient(to left top, #033965, rgba(0, 191, 251, 0));
    /* border-radius: 8px; */
}

.feature-icon:hover,
.feature-title{
    cursor: pointer;
}


</style>
<body class="is-boxed has-animations">
    <div class="body-wrap">
        <header class="site-header">
            <div class="container">
                <div class="site-header-inner">
                    <div class="brand header-brand">
                        <h1 class="m-0">
							<a href="/">
								<img class="header-logo-image" src="/logo.svg" alt="Logo">
                            </a>
                        </h1>
                    </div>
                </div>
            </div>
        </header>

        <main>
            <section class="hero">
                <div class="container">
                    <div id="heading">AllianceAgenda</div>
                    <div class="hero-inner">
						<div class="hero-copy">
	                        
	                        <h1 class="hero-title mt-0">Welcome, <span id="username"></span></h1>
	                        <p class="hero-paragraph">AllianceAgenda me aapka swagat hai !</p>
	                        <div class="hero-cta">
                                <a class="button button-primary" onclick="scrollToDiv('targetDiv')" href="#targetDiv">Services</a>
                                <a class="button" href="#">Need Help, Call - Ashish</a>
                            </div>
						</div>
						<div class="hero-figure anime-element">
							<svg class="placeholder" width="528" height="396" viewBox="0 0 528 396">
								<rect width="528" height="396" style="fill:transparent;" />
							</svg>
							<div class="hero-figure-box hero-figure-box-01" data-rotation="45deg"></div>
							<div class="hero-figure-box hero-figure-box-02" data-rotation="-45deg"></div>
							<div class="hero-figure-box hero-figure-box-03" data-rotation="0deg"></div>
							<div class="hero-figure-box hero-figure-box-04" data-rotation="-135deg"></div>
							<div class="hero-figure-box hero-figure-box-05"></div>
							<div class="hero-figure-box hero-figure-box-06"></div>
							<div class="hero-figure-box hero-figure-box-07"></div>
							<div class="hero-figure-box hero-figure-box-08" data-rotation="-22deg"></div>
							<div class="hero-figure-box hero-figure-box-09" data-rotation="-52deg"></div>
							<div class="hero-figure-box hero-figure-box-10" data-rotation="-50deg"></div>
						</div>
                    </div>
                </div>
            </section>

            <section class="features section" id="targetDiv">
                <div class="container">
<!-- oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo -->
                    <section id="announcementSection" style="display: none;">
                        <div id="announcements" class="announcement-class"></div>
                        <form id="addAnnouncementForm">
                            <h2>Add Announcement</h2>
                            <label for="title">Title:</label>
                            <input type="text" id="title" name="title" required>
                            <label for="content">Content:</label>
                            <input id="content" name="content" rows="4" required></input>
                            <!-- <label for="createdBy">Created By:</label> -->
                            <input type="hidden" id="createdBy" name="createdBy" value="">
                            <button type="submit" id="announcement-button">Add Announcement</button>
                        </form>
                    </section>
<!-- oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo -->
            <section id="taskSection" style="display: none;">
                <h1>Tasks</h1>
                <div id="taskList" class="task-class"></div>
                <form id="taskForm">
                    <h2>Add Tasks</h2>
                    <input type="text" id="Ttitle" placeholder="Task Title" required>
                    <input id="description" placeholder="Task Description" required></input>
                    <input type="date" id="dueDate" required>
                    <!-- <input type="text" id="priority" placeholder="Priority" required> -->
                    <select id="priority" required>
                        <option value="low">Low</option>
                        <option value="medium">Medium</option>
                        <option value="high">High</option>
                      </select>
                      <select id="assigned_to" required>
                        <option value="" disabled selected>Select User</option>
                    </select>
                    <!-- <input type="text" id="assigned_to" placeholder="Assigned To" required> -->
                    <input type="hidden" id="assigned_by" placeholder="Assigned By" required>
                    <button type="submit">Add Task</button>
                </form>  
        </section>
<!-- oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo -->
            <section>
                
            </section>
            <!-- 0000000000000000000000000000000000000000000000000000000000000000000000000000000000000 -->
					<div class="features-inner section-inner has-bottom-divider">
                       
                        <div class="features-wrap" >
                            <div class="feature text-center is-revealing" id="Gallery">
                                <div class="feature-inner" >
                                    <div class="feature-icon">
										<img src="/feature-icon-01.svg" alt="Feature 01">
                                    </div>
                                    <h4 class="feature-title mt-24">Photo Gallery</h4>
                                    <p class="text-sm mb-0">"Life is like a camera. Focus on what’s important, capture the good times, develop from the negatives, and if things don’t work out, take another shot."</p>
                                </div>
                            </div>
                            <div class="feature text-center is-revealing" >
                                <div class="feature-inner">
                                    <div class="feature-icon">
										<img src="/feature-icon-05.svg" alt="Feature 05">
                                    </div>
                                    <a href="#announcementSection" style="text-decoration: none;" id="toggleAnnouncementSection">
                                        <h4 class="feature-title mt-24" >Announcements</h4>
                                    </a>
                                    <p class="text-sm mb-0">"Attention everyone! We have some news so exciting, it might just make your coffee spill. Stay tuned!"</p>    
                                  </div>
                            </div>
							<div class="feature text-center is-revealing" class="tasks" id="tasks">
                                <div class="feature-inner">
                                    <div class="feature-icon">
										<img src="/feature-icon-02.svg" alt="Feature 02">
                                    </div>
                                    <a href="#taskSection" style="text-decoration: none;" id="showTaskSection">
                                    <h4 class="feature-title mt-24" id="showTaskSection">Tasks</h4>
                                    </a>
                                    <p class="text-sm mb-0">Fermentum posuere urna nec tincidunt praesent semper feugiat nibh. A arcu cursus vitae congue mauris. Nam at lectus urna duis convallis. Mauris rhoncus aenean vel elit scelerisque mauris.</p>
                                </div>
                            </div>



                            <div class="feature text-center is-revealing" class="communication" id="communication">
                                <div class="feature-inner">
                                    <div class="feature-icon">
										<img src="/feature-icon-03.svg" alt="Feature 03">
                                    </div>
                                    <h4 class="feature-title mt-24">Comminucation</h4>
                                    <p class="text-sm mb-0">Fermentum posuere urna nec tincidunt praesent semper feugiat nibh. A arcu cursus vitae congue mauris. Nam at lectus urna duis convallis. Mauris rhoncus aenean vel elit scelerisque mauris.</p>
                                </div>
                            </div>
                            
							
                            <div class="feature text-center is-revealing">
                                <div class="feature-inner">
                                    <div class="feature-icon">
										<img src="/feature-icon-06.svg" alt="Feature 06">
                                    </div>
                                    <h4 class="feature-title mt-24">Events</h4>
                                    <p class="text-sm mb-0">Fermentum posuere urna nec tincidunt praesent semper feugiat nibh. A arcu cursus vitae congue mauris. Nam at lectus urna duis convallis. Mauris rhoncus aenean vel elit scelerisque mauris.</p>
                                </div>
                            </div>
                        </div>

                       
                    </div>
                </div>
            </section>
            <section class="pricing section">
                <div class="container-sm">
                    <div class="pricing-inner section-inner">
                        <div class="pricing-header text-center">
                            <h2 class="section-title mt-0">hAVE a Nice Day </h2>
                            <p class="section-paragraph mb-0">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut ad quis nostrud.</p>
                        </div>
						 </div>
                </div>
            </section>

			<section class="cta section">
				<div class="container">
					<div class="cta-inner section-inner">
						<h6 class="section-title mt-0">Ashish Bhosale - (Founder of AllianceAgenda) </h6>
						<div class="cta-cta">
							<a class="button button-primary button-wide-mobile" href="#">Get in touch</a>
						</div>
					</div>
				</div>
			</section>
        </main>

        <footer class="site-footer" >
            <div class="container">
                <div class="site-footer-inner">
                    
                    <ul class="footer-social-links list-reset">
                        <li>
                            <a href="https://www.facebook.com/" target="_blank">
                                <span class="screen-reader-text">Facebook</span>
                                <svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M6.023 16L6 9H3V6h3V4c0-2.7 1.672-4 4.08-4 1.153 0 2.144.086 2.433.124v2.821h-1.67c-1.31 0-1.563.623-1.563 1.536V6H13l-1 3H9.28v7H6.023z" fill="#0270D7"/>
                                </svg>
                            </a>
                        </li>
                        <li>
                            <a href="https://x.com/" target="_blank">
                                <span class="screen-reader-text">Twitter</span>
                                <svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M16 3c-.6.3-1.2.4-1.9.5.7-.4 1.2-1 1.4-1.8-.6.4-1.3.6-2.1.8-.6-.6-1.5-1-2.4-1-1.7 0-3.2 1.5-3.2 3.3 0 .3 0 .5.1.7-2.7-.1-5.2-1.4-6.8-3.4-.3.5-.4 1-.4 1.7 0 1.1.6 2.1 1.5 2.7-.5 0-1-.2-1.5-.4C.7 7.7 1.8 9 3.3 9.3c-.3.1-.6.1-.9.1-.2 0-.4 0-.6-.1.4 1.3 1.6 2.3 3.1 2.3-1.1.9-2.5 1.4-4.1 1.4H0c1.5.9 3.2 1.5 5 1.5 6 0 9.3-5 9.3-9.3v-.4C15 4.3 15.6 3.7 16 3z" fill="#0270D7"/>
                                </svg>
                            </a>
                        </li>
                        <li>
                            <a href="https://www.google.com/" target="_blank">
                                <span class="screen-reader-text">Google</span>
                                <svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7.9 7v2.4H12c-.2 1-1.2 3-4 3-2.4 0-4.3-2-4.3-4.4 0-2.4 2-4.4 4.3-4.4 1.4 0 2.3.6 2.8 1.1l1.9-1.8C11.5 1.7 9.9 1 8 1 4.1 1 1 4.1 1 8s3.1 7 7 7c4 0 6.7-2.8 6.7-6.8 0-.5 0-.8-.1-1.2H7.9z" fill="#0270D7"/>
                                </svg>
                            </a>
                        </li>
                        <li>
                            <a href="https://www.instagram.com/its__ashu.11/" target="_blank">
                                <span class="screen-reader-text">Instagram</span>
                                <img width="18" height="18" src="https://img.icons8.com/glyph-neue/64/228BE6/instagram-new--v1.png" alt="instagram-new--v1"/>
                            </a>
                        </li>
                    </ul>
                     
                </div>
                <div class="about-us"   id="about-us" style="margin-bottom: 15px;">About Us:
                    Welcome to Alliance Agenda!
                    <br>
                    We are a dedicated team focused on creating innovative solutions for effective communication and efficient task and event management. Our platform, Alliance Agenda, is designed to streamline your workflow, keeping you organized and connected.
                    <br><br>
                    Our Founder: <br>
                    Ashish Bhosale is the visionary behind Alliance Agenda. With a passion for technology and a commitment to excellence, Ashish has been instrumental in bringing this platform to life. He is currently pursuing a Master of Computer Applications (MCA) at ASMS IBMR, where he continues to expand his knowledge and skills in the field of software development.
                </div>
                <div class="footer-copyright">&copy; 2024 AllianceAgenda, all rights reserved</div>
                    <br>
            </div>
            
            

        </footer>
    </div>

    <script src="/main.min.js"></script>
    <script>
        
document.getElementById("Gallery").addEventListener("click", function() {
    window.location.href = "/gallery";
});

// document.getElementById("tasks").addEventListener("click", function() {
//     window.location.href = "/task";
// });

document.getElementById("communication").addEventListener("click", function() {
    window.location.href = "/communication";
});


        // Retrieve the user's name from the query parameters or any other source
        const urlParams = new URLSearchParams(window.location.search);
        const firstName = urlParams.get('firstname');
        const lastName = urlParams.get('lastname');
        const userId = urlParams.get('id')
        const designation =urlParams.get('designation')
    
        // Store the user's name in a global variable
        const userFullName = `${firstName} ${lastName}`;
    
        // Display the username on the page
        document.getElementById('username').textContent = firstName;

         // Set the "created by" field with the user's full name
document.getElementById('createdBy').value = userId;

const toggleButton = document.getElementById('toggleAnnouncementSection');
        const announcementSection = document.getElementById('announcementSection');

        
        toggleButton.addEventListener('click', function() {
            if (announcementSection.style.display === 'none') {
                announcementSection.style.display = 'block';
                fetchAndDisplayAnnouncements();
            } else {
                announcementSection.style.display = 'none';
            }
        });

        document.getElementById('showTaskSection').addEventListener('click', function() {
        var taskSection = document.getElementById('taskSection');
        if (taskSection.style.display === 'none') {
            taskSection.style.display = 'block';
        } else {
            taskSection.style.display = 'none';
        }
    });

        const announcementsDiv = document.getElementById('announcements');
        const addAnnouncementForm = document.getElementById('addAnnouncementForm');

        // Function to fetch and display announcements
        function fetchAndDisplayAnnouncements() {
            fetch('/fetch-announcements') // 
                .then(response => response.json())
                .then(announcements => {
                    announcementsDiv.innerHTML = ''; // Clear existing announcements
                    announcements.forEach(announcement => {
                        const announcementElement = document.createElement('div');
                        announcementElement.innerHTML = `
                        <div class="announcement-container">
  <h6 class="announcement-title">${announcement.title}</h6>
  <p class="announcement-content">${announcement.content}</p>
  <p class="announcement-created-by">Created by: ${announcement.firstName} ${announcement.lastName}</p>
  
  <p class="announcement-created-at">Created at: ${new Date(announcement.createdAt).toLocaleString()}</p>
  <button class="announcement-delete-button" onclick="deleteAnnouncement('${announcement.id}')">Delete</button>
  <hr class="announcement-separator" />
</div>
                        `;
                        announcementsDiv.appendChild(announcementElement);
                    });
                })
                .catch(error => console.error('Error fetching announcements:', error));
        }

        // Function to handle form submission and add an announcement
        addAnnouncementForm.addEventListener('submit', function(event) {
            event.preventDefault();
            
            if(designation !== 'HOD' && designation !== 'Director'){
                alert(`You are not authorized to add announcement ${designation}`);
                return;
            }

            const formData = new FormData(addAnnouncementForm);

            const newAnnouncement = {
                title: formData.get('title'),
                content: formData.get('content'),
                createdBy: userId
            };

            fetch('/add-announcement', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(newAnnouncement),
            })
            .then(response => response.json())
            .then(data => {
                console.log('Success:', data);
                addAnnouncementForm.reset();
                fetchAndDisplayAnnouncements(); // Refresh the list of announcements
            })
            .catch((error) => {
                console.error('Error:', error);
            });
        });

        // Function to delete an announcement
        // Function to delete an announcement
        function deleteAnnouncement(id) {
    // Fetch the announcement details to check createdBy
    fetch(`/fetch-announcements/${id}`)
        .then(response => {
            if (!response.ok) {
                throw new Error('Failed to fetch announcement details');
            }
            return response.json();
        })
        .then(announcement => {
            const createdBy = announcement.createdBy;
           

            // Compare createdBy and userId to check authorization
            if (`${createdBy}` !== `${userId}`) {
                // User is not authorized to delete this announcement
                alert(`You are not authorized to delete this announcement, its not created by you!`);
                return;
            }

            // Delete the announcement
            fetch(`/delete-announcement/${id}`, {
                method: 'DELETE',
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Failed to delete announcement');
                }
               
            })
            .then(data => {
                console.log('Success:', data);
                fetchAndDisplayAnnouncements(); // Refresh the list of announcements
            })
            .catch(error => {
                console.error('Error:', error);
            });
        })
        .catch(error => {
            console.error('Error fetching or deleting announcement:', error);
        });
}



// ----------------------------------------------------------
        // // Retrieve the username from the query parameters
        // const urlParams = new URLSearchParams(window.location.search);
        // const username = urlParams.get('username');
    
        // // Display the username on the page
        // document.getElementById('username').textContent = username;   
      
    </script>
   
  
</body>
</html>
